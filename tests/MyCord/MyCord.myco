# My-Cord: Discord Bot Library for Myco

# =============================================================================
# COLOR CONSTANTS FOR EMBEDS
# =============================================================================

let color_purple = "10181046";
let color_blue = "3447003";
let color_green = "3066993";
let color_red = "15158332";
let color_orange = "15105570";
let color_yellow = "16776960";
let color_pink = "15277667";
let color_white = "16777215";
let color_black = "0";

# =============================================================================
# CORE DISCORD FUNCTIONS
# =============================================================================

# Send a simple text message to Discord
func send_message(message: string, token: string, channel_id: string): int:
    let url = "https://discord.com/api/v10/channels/";
    let full_url = "";
    join(full_url, url, channel_id);
    join(full_url, full_url, "/messages");
    
    let headers = "Authorization: Bot ";
    join(headers, headers, token);
    join(headers, headers, "\nContent-Type: application/json");
    
    let body = "{\"content\":\"";
    join(body, body, message);
    join(body, body, "\"}");
    
    let status = http(request("POST", full_url, headers, body));
    return status;
end

# Send an embed message to Discord
func send_embed(title: string, description: string, token: string, channel_id: string, color: string): int:
    let url = "https://discord.com/api/v10/channels/";
    let full_url = "";
    join(full_url, url, channel_id);
    join(full_url, full_url, "/messages");
    
    let headers = "Authorization: Bot ";
    join(headers, headers, token);
    join(headers, headers, "\nContent-Type: application/json");
    
    let body = "{\"embeds\":[{\"title\":\"";
    join(body, body, title);
    join(body, body, "\",\"description\":\"");
    join(body, body, description);
    join(body, body, "\",\"color\":");
    join(body, body, color);
    join(body, body, "}]}");
    
    let status = http(request("POST", full_url, headers, body));
    return status;
end

# Send a typing indicator
func send_typing(token: string, channel_id: string): int:
    let url = "https://discord.com/api/v10/channels/";
    join(url, url, channel_id);
    join(url, url, "/typing");
    
    let headers = "Authorization: Bot ";
    join(headers, headers, token);
    
    let status = http(request("POST", url, headers, ""));
    return status;
end

# =============================================================================
# UTILITY FUNCTIONS
# =============================================================================

# Create a field for rich embeds
func create_field(name: string, value: string, inline: int): string:
    let field = "{\"name\":\"";
    join(field, field, name);
    join(field, field, "\",\"value\":\"");
    join(field, field, value);
    join(field, field, "\",\"inline\":");
    if inline == 1:
        join(field, field, "true");
    else:
        join(field, field, "false");
    end
    join(field, field, "}");
    return field;
end

# Join multiple fields for rich embeds
func join_fields(field1: string, field2: string): string:
    let result = "";
    join(result, field1, ",");
    join(result, result, field2);
    return result;
end

# Validate bot configuration
func validate_config(token: string, channel_id: string): int:
    if token == "":
        return 0;
    end
    
    if channel_id == "":
        return 0;
    end
    
    return 1;
end

# =============================================================================
# LIBRARY INITIALIZATION
# =============================================================================

print("My-Cord Simple library loaded successfully!");
print("");
print("Available functions:");
print("  send_message(message, token, channel_id) - Send a simple text message");
print("  send_embed(title, description, token, channel_id, color) - Send an embed message");
print("  send_typing(token, channel_id) - Send typing indicator");
print("  create_field(name, value, inline) - Create embed field");
print("  join_fields(field1, field2) - Join multiple fields");
print("  validate_config(token, channel_id) - Validate bot configuration");
print("");
print("Available variables:");
print("  color_* - Color constants for embeds");
print("");
print("Library ready for use!");
print("Usage example:");
print("  send_message(\"Hello!\", bot_token, bot_channel_id);");
print("  send_embed(\"Title\", \"Description\", bot_token, bot_channel_id, color_blue);");